<critical>The workflow execution engine is governed by: {project_root}/bmad/core/tasks/workflow.xml</critical>
<critical>You MUST have already loaded and processed: {installed_path}/workflow.yaml</critical>
<critical>LegalAnalyst MUST study all Tonto guidance files before proceeding with Tonto Knowledge Graph queries</critical>

<workflow>

<step n="1" goal="Comprehensive Tonto Knowledge Graph Query Setup - Complete context awareness">
<action>Establish comprehensive query parameters met volledige OntologyBasis context</action>
<ask>Define comprehensive query specifications met cross-ontology awareness:
1. Query type (Tonto concept search, ontology navigation, cross-ontology relations, pattern matching, comparative analysis)
2. Focus area (juridische kern + cross-ontology: rights/duties + actors/events/values, all integrated)
3. Query scope (single concept, relation chains, ontology subgraph, cross-ontology linkages, complete Knowledge Graph)
4. Output format (ontological hierarchy, Tonto model export, cross-ontology matrix, interactive exploration, integrated report)
5. Integration level (intra-ontology, inter-ontology, complete OntologyBasis synthesis)</ask>
<critical>Valideer query parameters tegen alle 13 OntologyBasis ontologieën capabilities</critical>
<critical>Prepare voor comprehensive Tonto Knowledge Graph exploration across domains</critical>
<template-output>comprehensive_query_setup</template-output>
</step>

<step n="1.5" goal="Tonto Knowledge Acquisition - VERPLICHT voor query expertise">
<action>CRITICAL: LegalAnalyst MOET alle Tonto guidance bestanden laden en bestuderen</action>
<action>Laad de volgende Tonto guidance bestanden voor comprehensive query expertise:</action>
<subaction>tonto_llm_documentation_guide.instructions.md - Voor query result interpretation</subaction>
<subaction>tonto_llm_guidance.instructions.md - Voor ontologische query formulation</subaction>
<subaction>tonto_llm_terminology_analysis_guide.instructions.md - Voor concept matching en terminology queries</subaction>
<subaction>tonto_llm_understanding_and_summarization_guide.instructions.md - Voor result comprehension</subaction>
<subaction>tonto-cardinality-guidance.instructions.md - Voor relation query patterns</subaction>
<subaction>tonto-guidance.instructions.md - Voor Tonto model navigation</subaction>
<subaction>tonto-llm-create-new-elements.instructions.md - Voor query expansion possibilities</subaction>
<action>Integreer Tonto kennis voor comprehensive Knowledge Graph querying:</action>
<subaction>Ontological query formulation using UFO principles</subaction>
<subaction>Cross-ontology relation navigation</subaction>
<subaction>Tonto model structure understanding</subaction>
<subaction>Comprehensive result interpretation capabilities</subaction>
<critical>LegalAnalyst mag NIET verdergaan zonder volledige Tonto expertise voor query operations</critical>
</step>

<step n="2" goal="Complete OntologyBasis Loading for Query Context - Comprehensive foundation">
<action>Load ALL OntologyBasis ontologieën (13 bestanden) als complete query foundation</action>
<action>Voer comprehensive ontology awareness opbouw uit voor intelligent querying:</action>
<subaction>LegalOntology.tonto - Juridische kern voor primary legal queries</subaction>
<subaction>ObjectOntology.tonto - Normatieve context voor rule-based queries</subaction>
<subaction>LawOntology.tonto - Wet structuur voor hierarchical navigation</subaction>
<subaction>AgentOntology.tonto - Actoren voor stakeholder queries</subaction>
<subaction>EventOntology.tonto - Gebeurtenissen voor temporal queries</subaction>
<subaction>ModeOntology.tonto - Intenties voor motivation queries</subaction>
<subaction>ValueOntology.tonto - Waarden voor impact assessment queries</subaction>
<subaction>Alle andere ontologies - Complete context voor cross-ontology queries</subaction>
<action>Establish comprehensive query linkage awareness tussen ontologieën</action>
<action>Maak geïntegreerde query foundation voor cross-domain exploration</action>
<template-output>comprehensive_ontology_foundation</template-output>
</step>

<step n="2.1" goal="Load Existing Tonto Knowledge Graph - VERPLICHT voor alle queries">
<critical>CRITICAL: LOAD bestaande Tonto Knowledge Graph FIRST - dit is de core voor alle query operaties</critical>
<action>Bepaal Knowledge Graph locatie: {project-root}/docs/legal-knowledge-graph.tonto</action>
<check if="file does not exist">
<action>Creëer lege basisstructuur voor nieuwe query Knowledge Graph</action>
<action>Documenteer: "Nieuwe comprehensive query Knowledge Graph aangemaakt voor exploration"</action>
</check>
<check if="file exists">
<action>LOAD complete bestaande Tonto Knowledge Graph</action>
<action>Parse alle bestaande concepten, relaties en cross-references voor query navigation</action>
<action>Maak full Knowledge Graph beschikbaar voor comprehensive querying</action>
<action>Documenteer: "Bestaande Knowledge Graph geladen met X concepten voor comprehensive querying"</action>
</check>
<action>Stel Knowledge Graph beschikbaar als query foundation voor alle subsequent query operations</action>
<critical>LegalAnalyst: Alle queries opereren op de complete geïntegreerde juridische Knowledge Graph</critical>
<template-output>comprehensive_knowledge_graph_setup</template-output>
</step>

<step n="3" goal="Intelligent Query Formulation - Ontology-aware query construction">
<action>Formuleer intelligent queries met complete ontologische awareness</action>
<action>Translate user requirements naar ontologisch-informed queries:</action>
<subaction>Tonto structure navigation: Concept hierarchy traversal, stereotype filtering</subaction>
<subaction>Cross-ontology relation exploration: Inter-ontology linkage discovery</subaction>
<subaction>Pattern matching: UFO-compliant structural pattern recognition</subaction>
<subaction>Comparative analysis queries: Multi-concept relation analysis</subaction>
<subaction>Context-aware queries: Domain-specific query optimization</subaction>
<action>Dynamic query refinement based op discovered relations:</action>
<subaction>"Gevonden cross-ontology relatie - query uitbreiden naar gerelateerde ontologie?"</subaction>
<subaction>"UFO stereotype filtering ontdekt - query precisie verbeteren?"</subaction>
<template-output>ontology_aware_query_formulation</template-output>
</step>

<step n="4" goal="Multi-Ontology Query Execution - Comprehensive result synthesis">
<action>Execute queries tegen complete Tonto Knowledge Graph met cross-ontology synthesis</action>
<action>Process comprehensive results met ontologische reasoning:</action>
<subaction>Direct Tonto concept matches: Exact stereotype en naming matches</subaction>
<subaction>Cross-ontology relation inference: Inter-ontology linkage discovery</subaction>
<subaction>Pattern-based insights: UFO structure pattern recognition</subaction>
<subaction>Context expansion: Related concept discovery via OntologyBasis linkages</subaction>
<subaction>Confidence scoring: Ontologische consistency en relation strength assessment</subaction>
<template-output>comprehensive_query_execution</template-output>
</step>

<step n="5" goal="Cross-Ontology Results Interpretation - Multi-perspective analysis">
<action>Analyseer en interpreteer query results met complete ontologische context</action>
<action>Multi-perspective findings interpretation:</action>
<subaction>Ontologische betekenis: UFO stereotype implications voor gevonden concepten</subaction>
<subaction>Cross-ontology implicaties: Inter-ontology relation significances</subaction>
<subaction>Juridische implicaties: Legal domain consequences van geïdentificeerde patronen</subaction>
<subaction>Knowledge gaps: Missing cross-references en integration opportunities</subaction>
<subaction>Assumptie validatie: Verification tegen complete OntologyBasis context</subaction>
<subaction>Evolution patterns: Changes in concept relations over time</subaction>
<template-output>comprehensive_results_interpretation</template-output>
</step>

<step n="6" goal="Cross-Ontology Integration Validation - Query result consistency">
<action>Valideer query results tegen alle OntologyBasis ontologieën voor completeness</action>
<action>Multi-ontology consistency validation:</action>
<subaction>Ontologische compliance: UFO principle adherence in results</subaction>
<subaction>Cross-ontology consistency: Inter-ontology relation validity</subaction>
<subaction>Tonto model integrity: Syntax en semantic correctness</subaction>
<subaction>Integration completeness: All relevant OntologyBasis aspects covered</subaction>
<subaction>Semantic gaps analysis: Missing but relevant connections identified</subaction>
<template-output>comprehensive_integration_validation</template-output>
</step>

<step n="7" goal="Advanced Tonto Query Result Visualization - Cross-ontology representation">
<action>Create advanced visualizations van query results met ontologische awareness</action>
<action>Generate comprehensive Tonto-enhanced representations:</action>
<subaction>Ontologische hierarchy visualisatie: UFO-compliant structure mapping</subaction>
<subaction>Cross-ontology relation networks: Inter-ontology linkage visualization</subaction>
<subaction>Interactive Tonto exploration: Dynamic concept relation navigation</subaction>
<subaction>Comparative analysis views: Multi-concept relation comparison</subaction>
<subaction>Evolution tracking: Changes in relations over time</subaction>
<subaction>Pattern recognition maps: Structural archetype visualization</subaction>
<template-output>advanced_tonto_visualization</template-output>
</step>

<step n="8" goal="Query Completion & Enhancement Recommendations - Read-only synthesis">
<action>Compile comprehensive query rapport met enhancement recommendations zonder graph modification</action>
<action>Create comprehensive deliverables met cross-ontology insights:</action>
<subaction>Query resultaten synthesis (read-only Tonto model export)</subaction>
<subaction>Cross-ontology Knowledge Graph insights en discovered patterns</subaction>
<subaction>Integration gap analysis en completion recommendations</subaction>
<subaction>Future query suggestions gebaseerd op discovered relations</subaction>
<subaction>Ontological evolution tracking aanbevelingen</subaction>
<subaction>Comparative analysis opportunities voor multi-article studies</subaction>
<template-output>comprehensive_query_completion</template-output>
</step>

</workflow>
